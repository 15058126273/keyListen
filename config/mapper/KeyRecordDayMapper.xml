<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.play.mapper.KeyRecordDayMapper">

	<sql id="table_name" > key_record_day </sql>

	<parameterMap id="parameterType" type="KeyRecordDay" />

    <resultMap id="resultList" type="KeyRecordDay">
        <id column="id" property="id" jdbcType="BIGINT"/>
		<result column="user" property="user" jdbcType="VARCHAR"/>
		<result column="date" property="date" jdbcType="TIMESTAMP"/>
		<result column="beat_num" property="beatNum" jdbcType="INTEGER"/>
    </resultMap>

	<insert id="save" parameterMap="parameterType" useGeneratedKeys="true" keyColumn="id" keyProperty="id">
		insert into <include refid="table_name"/>
			(id, user, date, beat_num)
		values(
			#{id}, #{user}, #{date}, #{beatNum}
		)
	</insert>

	<update id="update" parameterMap="parameterType" >
		update <include refid="table_name"/>
		<set>
			user = #{user},
			date = #{date},
			beat_num = #{beatNum}
		</set>
		<where>
			id = #{id}
		</where>
	</update>

	<select id="findByT" parameterMap="parameterType" resultMap="resultList">
		select *
		from <include refid="table_name"/>
		<where>
			1 = 1
			<if test="id != null">and id = #{id}</if>
			<if test="user != null">and user = #{user}</if>
			<if test="date != null">and date = #{date}</if>
		</where>
	</select>



</mapper>